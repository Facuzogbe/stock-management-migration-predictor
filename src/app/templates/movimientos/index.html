<!-- src/app/templates/movimientos/index.html -->
{% extends "base.html" %}

{% block title %}Movimientos{% endblock %}

{% block content %}
<h2>Historial de Movimientos</h2>
<a href="{{ url_for('movimientos.nuevo_movimiento') }}">Registrar nuevo movimiento</a>

{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        <ul>
        {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
        {% endfor %}
        </ul>
    {% endif %}
{% endwith %}

<table class="table table-striped table-bordered">
    <thead class="table-dark">
      <tr>
        <th>ID</th>
        <th>Producto</th>
        <th>Tipo</th>
        <th>Cantidad</th>
        <th>Fecha</th>
      </tr>
    </thead>
    <tbody>
      {% for movimiento in movimientos %}
        <tr>
          <td>{{ movimiento.id }}</td>
          <td>{{ movimiento.producto.nombre }}</td>
          <td>{{ movimiento.tipo }}</td>
          <td>{{ movimiento.cantidad }}</td>
          <td>{{ movimiento.fecha }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  
  <a href="{{ url_for('movimientos.nuevo_movimiento') }}" class="btn btn-primary mt-3">Registrar nuevo movimiento</a>
  
{% endblock %}
